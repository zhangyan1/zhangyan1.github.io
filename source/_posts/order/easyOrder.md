---
title: 简易版订单系统
date: 2019-09-17 
categories: 设计
tags: [订单]
keywords: 订单,支付,收银台,业务系统
---

## 前言
- 从事订单支付系统的设计研发已经接近俩年了,一直想好好把其中一些思考沉淀下来。一是回顾之前的设计,看看迭代过程中的一些思路是否合理,如果给自己从头再来的机会(不用考虑苦逼的兼容脏数据等等问题)能否设计得更好?二来自己一直想培养写博客的习惯,却从15年一直到现在都没有养成,希望从现在开始能坚持下来一步一步写下去(无论技术还是感悟),此系列文章算是个开头,希望这个开头不太难

<!--more--> 

## 订单系统的思考
### 订单系统的定位
- 传统模式中作为底层支撑系统是一个承上启下的位置,上游对接商品用户等业务系统,下游对接支付系统。由业务系统发起下单,下单成功之后再交由支付系统去支付。订单系统只提供底层支持,由商品业务系统控制流程。但当有多种业务系统时,代码非常容易冗余不容易维护,迭代成本往往也很高。
  ![old](/images/orderImage/old.png)
  
- 改版后由订单作为中心系统控制订单流程,网关直接到订单系统,订单系统在下单之前,下单之后分别调用业务系统完成订单风控,以及订单通知
  ![new](/images/orderImage/old.png)
  
### 订单系统需要完成的核心功能 
- 记录交易快照(留下凭证既订单记录)
- 订单状态流转(完成交易闭环,支付,退款,取消等等)

 ## 订单系统的架构

- 简版订单设计如下图所示